/**
 * --------------------------------------------------------------------
 * jQuery accessible tabs plugin
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group 
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * --------------------------------------------------------------------
 */

jQuery.fn.tabs=function(a){var b=$.extend({updateHash:!1,autoRotate:!1,alwaysScrollToTop:!0},a);return $(this).each(function(){function g(a,e){c.find("a.tabs-selected").removeClass("tabs-selected").attr("tabindex","-1"),a.attr("tabindex","0").addClass("tabs-selected"),b.autoRotate||a.focus(),d.find("div.tabs-panel-selected").attr("aria-hidden",!0).removeClass("tabs-panel-selected"),$(a.attr("href")+f).addClass("tabs-panel-selected").attr("aria-hidden",!1),b.updateHash&&(location.hash=a.attr("href"))}function h(a){var b=a||window.location.hash,d=c.find('a[href="#'+b.replace("#","")+'"]');return d.size()>0?g(d,!0):g(c.find("a:first"),!0),!!d.size()}var a=$(this),c=a.find("nav"),d=a.find(".tab-container"),e="tab-",f="-enhanced";if(c.addClass("tabs-nav").attr("role","tablist"),d.addClass("tabs-body"),d.find(".tab-content").each(function(){$(this).addClass("tabs-panel").attr("role","tabpanel").attr("aria-hidden",!0).attr("aria-labelledby",e+$(this).attr("id")).attr("id",$(this).attr("id")+f)}),c.find("a").each(function(){$(this).attr("role","tab").attr("id",e+$(this).attr("href").split("#")[1])}),c.find("a").attr("tabindex","-1"),c.find("a").click(function(a){g($(this)),a.preventDefault()}).keydown(function(a){var b=$(this).parent(),d=!0;switch(a.keyCode){case 37:case 38:b.prev().size()>0&&(g(b.prev().find("a")),b.prev().find("a").eq(0).focus(),d=!1);break;case 39:case 40:b.next().size()>0&&(g(b.next().find("a")),b.next().find("a").eq(0).focus(),d=!1);break;case 36:g(c.find("li:first a")),c.find("li:first a").eq(0).focus(),d=!1;break;case 35:g(c.find("li:last a")),c.find("li:last a").eq(0).focus(),d=!1}return d}),a.bind("click keydown focus",function(){b.autoRotate&&clearInterval(i)}),h(null,!0),b.updateHash&&$(window).bind("hashchange",function(){var a=location.hash;h(a,!0)}),b.autoRotate)var i=setInterval(function(){var a=c.find(".tabs-selected"),b=a.next();b.length?g(b,!1):g(c.find("a:first"),!1)},b.autoRotate);b.alwaysScrollToTop&&$(window)[0].scrollTo(0,0)})},jQuery.fn.destroyTabs=function(){var a=$(this),b=a.find("nav"),c=a.find(".tab-container"),e="-enhanced";b.removeClass("tabs-nav").removeAttr("role"),c.removeClass("tabs-body"),c.find(".tab-content").each(function(){$(this).removeClass("tabs-panel").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").attr("id",$(this).attr("id").replace(e,""))}),b.find("a").each(function(){$(this).removeAttr("role").removeAttr("id")}),b.find("a").removeAttr("tabindex","-1"),b.find("a.tabs-selected").removeClass("tabs-selected").removeAttr("tabindex"),c.find("div.tabs-panel-selected").removeAttr("aria-hidden").removeClass("tabs-panel-selected"),a.off("click keydown focus")};